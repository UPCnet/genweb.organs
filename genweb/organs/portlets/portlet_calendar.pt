<div class="portlet portletCalendar">
  <div class="osomcorner-wrapper"><div class="osomcorner"></div></div>

  <div id="calendari" class="portletCalendar"
       i18n:domain="plone">

    <div class="portletHeader">
      <h2 class="align-center">
        <a href="#" rel="nofollow"
             class="pull-left calendarPrevious"
             title="Previous month"
             tal:define="prev_month view/prev_month;
                         prev_year view/prev_year"
             tal:attributes="href view/prev_query;
                             data-year prev_year;
                             data-month prev_month;"
             i18n:attributes="title title_previous_month;">
            <i class="fa fa-chevron-left"></i></a>
        <span i18n:translate="" tal:omit-tag="">
          <span i18n:name="monthname" i18n:translate=""
                tal:content="view/month_name"
                tal:omit-tag="">monthname</span>
          <span i18n:name="year" i18n:translate=""
                tal:content="view/year"
                tal:omit-tag="">year</span>
        </span>

        <a href="#" rel="nofollow"
           class="pull-right calendarNext"
           title="Next month"
           tal:define="next_month view/next_month;
                       next_year view/next_year"
           tal:attributes="href view/next_query;
                           data-year next_year;
                           data-month next_month;"
           i18n:attributes="title title_next_month;">
        <i class="fa fa-chevron-right"></i>
        </a>
      </h2>
    </div>
    <div class="pad">
      <table class="ploneCalendar" summary="Calendar"
          i18n:attributes="summary summary_calendar">
        <thead>
          <tr class="weekdays"><tal:data repeat="weekday view/weekdays">
            <th scope="col" i18n:translate="" tal:content="weekday">Su</th>
          </tal:data></tr>
        </thead>
        <tbody>
          <tr tal:repeat="week view/cal_data">
            <tal:block repeat="day week">
              <td tal:define="today day/today;
                            next_month day/next_month;
                            prev_month day/prev_month;
                            events day/events;
                            classtag python:view.getclasstag_event(day);
                            limit python:len(events) if events is not None else 0"
                  tal:attributes="class python:u'ulearnevent%s%s%s%s%s' %
                            ((today and ' today' or ''),
                            (next_month and ' cal_next_month' or ''),
                            (prev_month and ' cal_prev_month' or ''),
                            (events and ' cal_has_events' or ''),
                            (classtag or ''));
                            style string:background-color:${day/color}">
                  <a href=""
                    rel="popover" data-placement="bottom" data-html="True"
                    tal:omit-tag="not:events"
                    tal:attributes="href python:view.date_events_url(day['date_string']);
                                    data-content day/events_string;"
                    tal:content="day/day">31</a>

              </td>
            </tal:block>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

</div>
