<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="genweb.organs">
<body>

<metal:content-core fill-slot="content-core">

  <metal:block define-macro="content-core">

<tal:blockReserved tal:condition="view/viewReservedFile">
  <div tal:condition="view/hihaReserved">
    <div tal:define="reserved_content_type context/hiddenfile/contentType|nothing;
                     reserved_file_download_url string:${context/absolute_url}/@@download/hiddenfile/${context/hiddenfile/filename};">
      <h3> Fitxer reservat </h3>
      <p>
        <a tal:attributes="href reserved_file_download_url">
          <img tal:attributes="src view/get_mimetype_icon_reserved;
                               alt reserved_content_type;" border="0" />
          <tal:name tal:content="context/hiddenfile/filename">Filename</tal:name>
        </a>
        <span class="discreet"
            tal:define="size context/hiddenfile/getSize;
                        kb python:size/1024">
          &mdash; <span tal:replace="kb" /> KB</span>
      </p>
      <video tal:condition="view/is_videotype_reserved" controls="controls">
        <source tal:attributes="src reserved_file_download_url; type reserved_content_type"></source>
      </video>
      <audio tal:condition="view/is_audiotype_reserved" controls="controls">
        <source tal:attributes="src reserved_file_download_url; type reserved_content_type"></source>
      </audio>
      <div tal:condition="python: reserved_content_type.startswith('text')">
        <h2 i18n:translate="">File contents</h2>
        <pre tal:content="context/hiddenfile/data|nothing"></pre>
      </div>
    </div>
  </div>
</tal:blockReserved>

<tal:blockPublic tal:condition="view/viewPublicFile">
  <div tal:condition="view/hihaPublic">

    <div tal:define="visible_content_type context/visiblefile/contentType|nothing;
                     public_file_download_url string:${context/absolute_url}/@@download/visiblefile/${context/visiblefile/filename}">
      <h3> Fitxer p√∫blic </h3>
      <p>
        <a tal:attributes="href public_file_download_url">
          <img tal:attributes="src view/get_mimetype_icon_public;
                               alt visible_content_type;" border="0" />
          <tal:name tal:content="context/visiblefile/filename">Filename</tal:name>
        </a>
        <span class="discreet"
            tal:define="size context/visiblefile/getSize;
                        kb python:size/1024">
          &mdash; <span tal:replace="kb" /> KB</span>
      </p>
      <video tal:condition="view/is_videotype_public" controls="controls">
        <source tal:attributes="src public_file_download_url; type visible_content_type"></source>
      </video>
      <audio tal:condition="view/is_audiotype_public" controls="controls">
        <source tal:attributes="src public_file_download_url; type visible_content_type"></source>
      </audio>
      <div tal:condition="python: visible_content_type.startswith('text')">
        <h2 i18n:translate="">File contents</h2>
        <pre tal:content="context/visiblefile/data|nothing"></pre>
      </div>
    </div>
    </div>
</tal:blockPublic>
  </metal:block>

</metal:content-core>

</body>
</html>
